{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Covid en Datos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
	<link rel="stylesheet" href="{% static 'css/animate.css'%}">
    <link rel="stylesheet" href="{% static 'tarjeta/css/style.css' %}">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<!-- font para despues agregar texto -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,300&display=swap" rel="stylesheet">
    <!-- js del grafico -->
    <script src='https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js'></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  </head>
  <body>
  <div style="border-top-color: {{color}};" class="services text-center">
                                <div class="text">
                                    <h3 style="color: {{color}}; font-size: 40px;">{{ titulo }}</h3>
                                    {% if subtitulo %}<p class="cinco" style="font-size:23px; color:#38485C;">{{ subtitulo }}</p>{% endif %}
                                    <p class="uno" >Actualizado al {{ fecha | date:"d" }} de {{fecha | date:"F"}}</p>
                                    <hr>
                                    
                                    <h2 style="color:{{color}};" class="dos"><b>{{ total }}</b></h2>
                                    
                                    <div class="cuatro" >
                                        {% if grafico %}
                                        {% if datos_x %}
                                            <div style="padding-left: 30px;padding-right: 30px;" wfd-id="5">
                                                <canvas  id=chart style="width:75%;"></canvas>
                                            </div>
                                        {% else %}
                                            <span style="color: red; font-weight: bold; border: 1px solid red; padding: 3px;">No se encuentran datos para gráfico!</span>
                                        {% endif %}
                                        {% endif %}
                                        {% if grafico %}
                                            <p style="margin: 1rem 0;">Tendencia últimos {{ muestra }} días</p>
                                        {% endif %}

                                        {% if comentarios %}<p class="cinco">{{ comentarios }}</p>{% endif %}
                                        <a target="_blank" href="{{link_datos}}"><div class="boton-descargar-datos"> <i class="fas fa-download"> </i> <b> Descargar datos</b></div></a>

                                    </div>
                                </div>
  {% if grafico %}
        <script type="text/javascript">
  	const chart = document.getElementById('chart').getContext('2d');

    const data = {
        labels: {{datos_x | safe}},
        datasets: [
            {
                label: "Grafico tipo timeline",
                fill: false,
                lineTension: 0,
                backgroundColor: "rgb(46,91,190)",
                borderColor: "rgb(196,196,196)",//"rgb(46,91,190)",
                borderCapStyle: 'butt',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "{{color}}",
                pointBackgroundColor: "{{color}}",
                pointBorderWidth: 9,
                data: {{ datos_y | safe }},
                pointRadius: {{ cant_datos }}
            }
        ]}
    const options = {
            legend: {
                display: false
            },
            scales: {
                   yAxes: [{
                       ticks: {
                           display: false,

                       },
                       gridLines: {
                           display:false
                       }
                   }],
                   xAxes: [{
                    ticks: {
                        display: false
                    },
                    gridLines: {
                           display:false
                       }
                }]
               },
               layout: {
                padding: {
                    left: 0,
                    right: 9,
                    top: 9,
                    bottom: 0
                }
            },
            tooltips: {enabled: false},
        hover: {mode: null},
        }

    let dataChart = new Chart(chart,
    {
        type:'line',
        data:data,
        options:options


    });
  </script>
  {% endif %}
  </body>
</html>